<html>
  <head>
    <title>Hello, World! example for mxGraph</title>

    <script type="text/javascript">
      mxBasePath = 'node_modules/mxgraph/javascript/src';
    </script>

    <script type="text/javascript" src="node_modules/mxgraph/javascript/src/js/mxClient.js"></script>

    <script type="text/javascript">
      function main(container) {
        if (!mxClient.isBrowserSupported()) {
          mxUtils.error('Browser is not supported!', 200, false);
          return;
        }

        // Creates the graph inside the given container
        const graph = new mxGraph(container);

        // Enables rubberband selection
        // new mxRubberband(graph);

        // Gets the default parent for inserting new cells. This
        // is normally the first child of the root (ie. layer 0).
        const parent = graph.getDefaultParent();

        // Adds cells to the model in a single step
        graph.getModel().beginUpdate();
        try {
          const v1 = graph.insertVertex(parent, null, 'Hello,', 20, 20, 80, 100);
          const foo = graph.insertVertex(v1, null, 'Foo', 10, 10, 40, 15);
          const v2 = graph.insertVertex(parent, null, 'World!', 200, 150, 80, 100);
          const bar = graph.insertVertex(v2, null, 'Bar', 10, 10, 40, 15);
          const e1 = graph.insertEdge(parent, null, '', v1, v2);
          const e2 = graph.insertEdge(parent, null, '', foo, bar);

          graph.addListener(mxEvent.CLICK, (sender, evt) => {
            const cell = evt.getProperty('cell');
            if (!!cell && cell.value === 'Foo') {
              graph.setCellStyle(`defaultVertex;${mxConstants.STYLE_FILLCOLOR}=#ff0000`, [cell]);
              // debugger;
              //graph.setCellStyle(`defaultEdge;${mxConstants.STYLE_STROKE_OPACITY}=0`, [e2]);
              graph.removeCells([e2]);
            }
            evt.consume();
          });
        } finally {
          // Updates the display
          graph.getModel().endUpdate();
        }
      }
    </script>
  </head>

  <body onload="main(document.getElementById('graphContainer'))">
    <div id="graphContainer" style="overflow:hidden;width:100%;height:100%;background-color:beige"></div>
  </body>
</html>
